<% if user_signed_in? %>
  <h1><%= "ようこそ、#{current_user.account_name}さん" %></h1>
    <%= link_to new_article_path do %>
      <%= "ツイートを送信する" %>
    <% end %>
  <br>
    <%= link_to user_path(current_user.id) do%>
      <%= "マイページへ"%>
    <% end %>
  <br>
  <br>
    <%= link_to destroy_user_session_path, method: "delete" do %>
      <%= "ログアウト" %>
    <% end %>
  <% else %>
  <h1><%= "MiniTweetへようこそ" %></h1>
    <%= link_to new_user_registration_path do %>
      <%= "ユーザー登録ページへ" %>
    <% end %>
  <br>
    <%= link_to new_user_session_path do %>
      <%= "ログインページへ" %>
    <% end %>
<% end %>

<br>
<br>
<h3>全てのユーザーのツイート</h3>
<% Article.all.each do |article| %>
  <% if user_signed_in? %>
    <div class="title">
      <%= link_to "#{article.user.account_name}",user_path(article.user.id) %>
      <%= "(#{article.created_at.in_time_zone('Tokyo').strftime("%Y/%m/%d %H:%M:%S")})：" %>
      <%= article.tweet %>
      <span action="<%= create_like_article_path(article) %>" class="like <% if article.likes.find_by(user_id: current_user.id) != nil %>active<% end %>" id="article<%= article.id%>" style="color:blue">いいね！<%= article.likes.count %></span>
      <br>
    </div>
  <% else %>
    <div class="title">
      <%= "#{article.user.account_name}(#{article.created_at.in_time_zone('Tokyo').strftime("%Y/%m/%d %H:%M:%S")})：" %>
      <%= article.tweet %>
      <span action="<%= create_like_article_path(article) %>" class="like" style="color:blue">いいね！<%= article.likes.count %></span>
      <br>
    </div>
  <% end %>
<% end %>
<br>

<% if user_signed_in? %>
  <h3>あなたのツイート</h3>
  <% Article.all.each do |article| %>
    <% if Follow.find_by(following_id: article.user.id ,followed_by_id: current_user.id) != nil || article.user.id == current_user.id %>
      <div class="title">
        <%= link_to "#{article.user.account_name}",user_path(article.user.id) %>
        <%= "(#{article.created_at.in_time_zone('Tokyo').strftime("%Y/%m/%d %H:%M:%S")})：" %>
        <%= article.tweet %>
        <span action="<%= create_like_article_path(article) %>" class="like <% if article.likes.find_by(user_id: current_user.id) != nil %>active<% end %>" id="article<%= article.id%>" style="color:blue">いいね！<%= article.likes.count %></span>
        <br>
      </div>
    <% end %>
  <% end %>
  <br>
  <h3>通知</h3>
  <% Notification.where(notifying_id: current_user.id).each do |notification| %>
      <div class="title">
        <% if notification.article_id != nil %>
          <%= User.find(notification.notified_by_id).account_name %>さんがあなたのツイートにいいねしました:<%= Article.find(notification.article_id).tweet %>
        <%# <% else %>
          <%# <%= User.find(notification.notified_by_id).account_nameさんがあなたをフォローしました %> 
        <% end %>
      </div>
  <% end %>
<% end %>